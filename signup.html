<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Softroniics | Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --primary-color: #f59e0b; --muted-text: #64748b; }
        body {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.08), rgba(139, 92, 246, 0.08));
            min-height: 100vh; display: flex; align-items: center; justify-content: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; color: #1e293b;
        }
        .card-box { background:#fff; width:100%; max-width:520px; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.08); overflow:hidden; }
        .header { padding:24px 24px 8px 24px; text-align:center; }
        .brand { font-weight:800; font-size:1.5rem; color:var(--primary-color); }
        .sub { color:var(--muted-text); font-size:.95rem; }
        .body { padding:24px; }
        .btn-primary { background:var(--primary-color); border:none; }
        .btn-primary:hover { background:#1e40af; }
        .form-control { border-radius:10px; padding:10px 12px; }
        .btn-group .btn { border-radius:10px !important; }
        .helper { color:var(--muted-text); font-size:.9rem; }
    </style>
    <script>
        (function(){
            // Redirect to dashboard if already logged in
            try {
                var a = JSON.parse(localStorage.getItem('auth')||'null');
                if (a && (a.role==='admin'||a.role==='student')) { window.location.replace('index.html'); }
            } catch(_) {}
        })();
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function(){
            var form = document.getElementById('signupForm');
            form.addEventListener('submit', function(e){
                e.preventDefault();
                var role = document.querySelector('input[name="role"]:checked')?.value || 'student';
                var name = document.getElementById('name').value.trim();
                var email = document.getElementById('email').value.trim().toLowerCase();
                var password = document.getElementById('password').value;
                var confirm = document.getElementById('confirm').value;

                if (!name || !email || !password) return show('Please fill all required fields.', 'danger');
                if (password.length < 6) return show('Password must be at least 6 characters.', 'danger');
                if (password !== confirm) return show('Passwords do not match.', 'danger');
                if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)) return show('Please enter a valid email address.', 'danger');

                var users = [];
                try { users = JSON.parse(localStorage.getItem('users')||'[]') || []; } catch(_) { users = []; }
                var exists = users.some(function(u){ return u.email === email; });
                if (exists) return show('An account with this email already exists.', 'warning');

                var user = { role: role, name: name, email: email, password: password, createdAt: Date.now() };
                users.push(user);
                localStorage.setItem('users', JSON.stringify(users));

                show('Account created successfully. Redirecting to login...', 'success');
                setTimeout(function(){ window.location.replace('login.html'); }, 900);
            });

            function show(msg, type){
                var el = document.getElementById('alert');
                el.className = 'alert alert-' + type;
                el.textContent = msg;
                el.style.display = 'block';
            }
        });
    </script>
</head>
<body>
    <div class="card-box">
        <div class="header">
            <div class="brand"><i class="fas fa-graduation-cap me-2"></i>Softroniics <span class="text-dark"></span> <span style="color: var(--primary-color);">.</span></div>
            <div class="sub">Create your account</div>
        </div>
        <div id="alert" class="alert" role="alert" style="display:none; margin:0 24px;"></div>
        <div class="body">
            <form id="signupForm">
                <div class="mb-3">
                    <label class="form-label">Role</label>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="role" id="sRoleStudent" value="student" checked>
                        <label class="btn btn-outline-primary" for="sRoleStudent"><i class="fa-solid fa-user-graduate me-1"></i> Student</label>
                        <input type="radio" class="btn-check" name="role" id="sRoleAdmin" value="admin">
                        <label class="btn btn-outline-primary" for="sRoleAdmin"><i class="fa-solid fa-user-shield me-1"></i> Admin</label>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="name" class="form-label">Full Name</label>
                    <input type="text" id="name" class="form-control" placeholder="Your name" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" id="email" class="form-control" placeholder="you@example.com" required>
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" id="password" class="form-control" placeholder="At least 6 characters" required>
                </div>
                <div class="mb-3">
                    <label for="confirm" class="form-label">Confirm Password</label>
                    <input type="password" id="confirm" class="form-control" placeholder="Re-enter password" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Create Account</button>
                <div class="mt-3 helper">Already have an account? <a href="login.html">Sign in</a></div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>
    
</html>


